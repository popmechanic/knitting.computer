# Cloudflare Worker configuration for knitting
#
# Prerequisites:
#   1. Create KV namespace: wrangler kv namespace create TENANTS
#   2. Copy the namespace ID below
#   3. Update PAGES_HOSTNAME with your Pages project URL
#   4. Deploy: wrangler deploy
#   5. Set secret: wrangler secret put CLERK_SECRET_KEY

name = "knitting-wildcard"
main = "worker.js"
compatibility_date = "2024-12-01"

[vars]
PAGES_HOSTNAME = "knitting-computer.pages.dev"

# Create this KV namespace with: wrangler kv namespace create TENANTS
# Then copy the ID below
[[kv_namespaces]]
binding = "TENANTS"
id = "17e5c9f2fea442a68da19d05396272f6"

# Worker routes - add these MANUALLY in Cloudflare Dashboard if they don't apply
# Dashboard: Workers & Pages > knitting-wildcard > Settings > Triggers > Routes
routes = [
  { pattern = "*.knitting.computer/*", zone_name = "knitting.computer" },
  { pattern = "knitting.computer/api/*", zone_name = "knitting.computer" },
  { pattern = "knitting.computer/webhooks/*", zone_name = "knitting.computer" }
]
